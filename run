#!/bin/bash

#tsc
export LOG_LEVEL=0             # Default log level is 0
export LOG_LEVEL=2             # here for testing
if [ $# == 1 ]; then           # One command line argument
  if [ $1 == "install" ]; then # Install
    echo "Installing required packages..."
    npm install # Install packages in userland
    echo "Installed required packages"
  elif [ $1 == "test" ]; then # Test
    echo "Current log level is $LOG_LEVEL"
    echo "You chose test"
    # Call the test suite here
  else                    # URL_FILE
    tsc                   # Compile TypeScript files to JavaScript
    if [ $? -ne 0 ]; then # ?
      echo "TypeScript compilation failed. Exiting..."
      exit 1
    fi
    # Can't echo anything here or syntax checker fails
    node src/main.js $1
  fi
else # Not one command line argument
  echo "Invalid number of command line arguments"
fi
